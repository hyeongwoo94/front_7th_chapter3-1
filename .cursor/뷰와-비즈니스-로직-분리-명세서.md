# ë·°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬ ëª…ì„¸ì„œ

## ğŸ“‹ ê°œìš”

ManagementPage ì»´í¬ë„ŒíŠ¸ì˜ ë·°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™„ì „íˆ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì„ í–¥ìƒì‹œí‚¨ ë¦¬íŒ©í† ë§ ì‘ì—…ì…ë‹ˆë‹¤.

## ğŸ¯ ëª©í‘œ

1. **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ (Separation of Concerns)**: UI ë Œë”ë§ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ëª…í™•íˆ ë¶„ë¦¬
2. **ì¬ì‚¬ìš©ì„± í–¥ìƒ**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥
3. **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
4. **ì½”ë“œ ê°€ë…ì„± í–¥ìƒ**: ê° íŒŒì¼ì˜ ì±…ì„ì´ ëª…í™•í•´ì ¸ ì½”ë“œ ì´í•´ê°€ ì‰¬ì›Œì§

## ğŸ“ íŒŒì¼ êµ¬ì¡°

### ìƒì„±ëœ íŒŒì¼

```
packages/after/src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ validation.ts          # í¼ ê²€ì¦ ë¡œì§
â”‚   â”œâ”€â”€ stats.ts               # í†µê³„ ê³„ì‚° ë¡œì§
â”‚   â””â”€â”€ table-columns.ts       # í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜
â””â”€â”€ hooks/
    â””â”€â”€ useManagementPage.ts   # ManagementPage ì»¤ìŠ¤í…€ í›…
```

### ìˆ˜ì •ëœ íŒŒì¼

```
packages/after/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ ManagementPage.tsx    # ë·°ë§Œ ë‹´ë‹¹í•˜ëŠ” ìˆœìˆ˜ ì»´í¬ë„ŒíŠ¸
â””â”€â”€ components/
    â””â”€â”€ molecules/
        â””â”€â”€ FormInput.tsx      # ê²€ì¦ ë¡œì§ ì œê±°, ìˆœìˆ˜ UI ì»´í¬ë„ŒíŠ¸
```

## ğŸ“ ìƒì„¸ ëª…ì„¸

### 1. í¼ ê²€ì¦ ë¡œì§ ë¶„ë¦¬ (`lib/validation.ts`)

**ì—­í• **: ì‚¬ìš©ì ë° ê²Œì‹œê¸€ í¼ ë°ì´í„°ì˜ ê²€ì¦ ë¡œì§ì„ ê´€ë¦¬

**ì£¼ìš” í•¨ìˆ˜**:
- `validateUserForm(data: UserFormData)`: ì‚¬ìš©ì í¼ ë°ì´í„° ê²€ì¦
  - í•„ìˆ˜ í•„ë“œ ê²€ì¦ (username, email)
  - ì´ë©”ì¼ í˜•ì‹ ê²€ì¦
  - ì‚¬ìš©ìëª… ê¸¸ì´ ê²€ì¦ (3-20ì)
  - ì‚¬ìš©ìëª… í˜•ì‹ ê²€ì¦ (ì˜ë¬¸, ìˆ«ì, ì–¸ë”ìŠ¤ì½”ì–´ë§Œ)

- `validatePostForm(data: PostFormData)`: ê²Œì‹œê¸€ í¼ ë°ì´í„° ê²€ì¦
  - í•„ìˆ˜ í•„ë“œ ê²€ì¦ (title, author, category)
  - ì œëª© ê¸¸ì´ ê²€ì¦ (5-100ì)

**íƒ€ì… ì •ì˜**:
```typescript
export type UserFormData = {
  username?: string;
  email?: string;
  role?: "admin" | "moderator" | "user";
  status?: "active" | "inactive" | "suspended";
};

export type PostFormData = {
  title?: string;
  content?: string;
  author?: string;
  category?: string;
  status?: "draft" | "published" | "archived";
};
```

**ë°˜í™˜ íƒ€ì…**:
```typescript
{ isValid: boolean; error?: string }
```

### 2. í†µê³„ ê³„ì‚° ë¡œì§ ë¶„ë¦¬ (`lib/stats.ts`)

**ì—­í• **: ì‚¬ìš©ì ë° ê²Œì‹œê¸€ í†µê³„ ë°ì´í„°ë¥¼ ê³„ì‚°í•˜ëŠ” ë¡œì§

**ì£¼ìš” í•¨ìˆ˜**:
- `calculateUserStats(users: User[]): Stats`: ì‚¬ìš©ì í†µê³„ ê³„ì‚°
  - ì „ì²´ ì‚¬ìš©ì ìˆ˜
  - í™œì„±/ë¹„í™œì„±/ì •ì§€ ì‚¬ìš©ì ìˆ˜
  - ê´€ë¦¬ì ìˆ˜

- `calculatePostStats(posts: Post[]): Stats`: ê²Œì‹œê¸€ í†µê³„ ê³„ì‚°
  - ì „ì²´ ê²Œì‹œê¸€ ìˆ˜
  - ê²Œì‹œë¨/ì„ì‹œì €ì¥/ë³´ê´€ë¨ ê²Œì‹œê¸€ ìˆ˜
  - ì´ ì¡°íšŒìˆ˜

**íƒ€ì… ì •ì˜**:
```typescript
export type StatItem = {
  label: string;
  value: number;
  color: string;
};

export type Stats = {
  total: number;
  stat1: StatItem;
  stat2: StatItem;
  stat3: StatItem;
  stat4: StatItem;
};
```

### 3. í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜ ë¶„ë¦¬ (`lib/table-columns.ts`)

**ì—­í• **: í…Œì´ë¸” ì»¬ëŸ¼ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” ë¡œì§

**ì£¼ìš” í•¨ìˆ˜**:
- `getUserTableColumns(): TableColumn[]`: ì‚¬ìš©ì í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜
- `getPostTableColumns(): TableColumn[]`: ê²Œì‹œê¸€ í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜

**íƒ€ì… ì •ì˜**:
```typescript
export type TableColumn = {
  key: string;
  header: string;
  width?: string;
};
```

### 4. Custom Hook ìƒì„± (`hooks/useManagementPage.ts`)

**ì—­í• **: ManagementPageì˜ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê´€ë¦¬í•˜ëŠ” ì»¤ìŠ¤í…€ í›…

**ê´€ë¦¬í•˜ëŠ” ìƒíƒœ**:
- `entityType`: í˜„ì¬ ì„ íƒëœ ì—”í‹°í‹° íƒ€ì… (user | post)
- `data`: ë¡œë“œëœ ë°ì´í„°
- `isCreateModalOpen`, `isEditModalOpen`: ëª¨ë‹¬ ìƒíƒœ
- `selectedItem`: ì„ íƒëœ ì•„ì´í…œ
- `showSuccessAlert`, `showErrorAlert`: ì•Œë¦¼ ìƒíƒœ
- `alertMessage`, `errorMessage`: ì•Œë¦¼ ë©”ì‹œì§€
- `userFormData`, `postFormData`: í¼ ë°ì´í„°
- `stats`: ê³„ì‚°ëœ í†µê³„ ë°ì´í„°

**ì œê³µí•˜ëŠ” í•¨ìˆ˜**:
- `loadData()`: ë°ì´í„° ë¡œë“œ
- `handleCreate()`: ìƒì„± ì²˜ë¦¬ (ê²€ì¦ í¬í•¨)
- `handleEdit(item)`: ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸°
- `handleUpdate()`: ì—…ë°ì´íŠ¸ ì²˜ë¦¬ (ê²€ì¦ í¬í•¨)
- `handleDelete(id)`: ì‚­ì œ ì²˜ë¦¬
- `handleStatusAction(id, action)`: ìƒíƒœ ë³€ê²½ ì²˜ë¦¬ (publish, archive, restore)
- `getStats()`: í†µê³„ ê³„ì‚°

**ì˜ì¡´ì„±**:
- `userService`, `postService`: ë°ì´í„° ì„œë¹„ìŠ¤
- `validateUserForm`, `validatePostForm`: ê²€ì¦ ë¡œì§
- `calculateUserStats`, `calculatePostStats`: í†µê³„ ê³„ì‚°

### 5. ManagementPage ë¦¬íŒ©í† ë§ (`pages/ManagementPage.tsx`)

**ë³€ê²½ ì „**:
- ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì¡´ì¬
- ìƒíƒœ ê´€ë¦¬, ë°ì´í„° ë¡œë”©, ê²€ì¦, í†µê³„ ê³„ì‚° ë“±ì´ ëª¨ë‘ ì»´í¬ë„ŒíŠ¸ì— í¬í•¨
- ì•½ 740ì¤„ì˜ ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸

**ë³€ê²½ í›„**:
- ìˆœìˆ˜ ë·° ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½
- `useManagementPage` í›…ì„ í†µí•´ ëª¨ë“  ë¡œì§ì„ ì£¼ì…ë°›ìŒ
- ì•½ 490ì¤„ë¡œ ê°„ì†Œí™”
- ë·° ë Œë”ë§ì—ë§Œ ì§‘ì¤‘

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
```typescript
// ë³€ê²½ ì „
export const ManagementPage: React.FC = () => {
  const [entityType, setEntityType] = useState<EntityType>("post");
  const [data, setData] = useState<Entity[]>([]);
  // ... ë§ì€ ìƒíƒœì™€ ë¡œì§
  const handleCreate = async () => { /* ë³µì¡í•œ ë¡œì§ */ };
  // ...
};

// ë³€ê²½ í›„
export const ManagementPage: React.FC = () => {
  const {
    entityType,
    data,
    // ... ëª¨ë“  ìƒíƒœì™€ í•¨ìˆ˜ë¥¼ í›…ì—ì„œ ì£¼ì…ë°›ìŒ
    handleCreate,
    // ...
  } = useManagementPage();
  
  // ë·° ë Œë”ë§ë§Œ ë‹´ë‹¹
  return (/* JSX */);
};
```

### 6. FormInput ì»´í¬ë„ŒíŠ¸ ì •ë¦¬ (`components/molecules/FormInput.tsx`)

**ë³€ê²½ ì „**:
- `fieldType`, `entityType`, `checkBusinessRules` props ì¡´ì¬
- ë‚´ë¶€ì— `validateField` í•¨ìˆ˜ë¡œ ê²€ì¦ ë¡œì§ í¬í•¨
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ UI ì»´í¬ë„ŒíŠ¸ì— í˜¼ì¬

**ë³€ê²½ í›„**:
- ìˆœìˆ˜ UI ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½
- ê²€ì¦ ë¡œì§ ì™„ì „ ì œê±°
- `error` propì„ í†µí•´ì„œë§Œ ì—ëŸ¬ í‘œì‹œ (ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê²€ì¦)

**ì œê±°ëœ props**:
- `fieldType`: 'username' | 'email' | 'postTitle' | 'slug' | 'normal'
- `entityType`: 'user' | 'post'
- `checkBusinessRules`: boolean

**ë³€ê²½ ì „ ì½”ë“œ**:
```typescript
const validateField = (val: string) => {
  if (fieldType === 'username') {
    // ê²€ì¦ ë¡œì§...
  } else if (fieldType === 'email') {
    // ê²€ì¦ ë¡œì§...
  }
  // ...
};
```

**ë³€ê²½ í›„ ì½”ë“œ**:
```typescript
const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  onChange(e.target.value); // ë‹¨ìˆœíˆ ê°’ë§Œ ì „ë‹¬
};
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œì„ 

### Before (ë¶„ë¦¬ ì „)

```
ManagementPage.tsx
â”œâ”€â”€ ìƒíƒœ ê´€ë¦¬ (useState)
â”œâ”€â”€ ë°ì´í„° ë¡œë”© (useEffect, useCallback)
â”œâ”€â”€ í¼ ê²€ì¦ ë¡œì§
â”œâ”€â”€ í†µê³„ ê³„ì‚° ë¡œì§
â”œâ”€â”€ í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜
â””â”€â”€ ë·° ë Œë”ë§
```

**ë¬¸ì œì **:
- ë‹¨ì¼ íŒŒì¼ì— ëª¨ë“  ë¡œì§ì´ ì§‘ì¤‘
- í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€
- ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥
- ì½”ë“œ ê°€ë…ì„± ì €í•˜

### After (ë¶„ë¦¬ í›„)

```
ManagementPage.tsx (ë·°)
    â†“
useManagementPage.ts (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
    â†“
â”œâ”€â”€ validation.ts (ê²€ì¦)
â”œâ”€â”€ stats.ts (í†µê³„)
â”œâ”€â”€ table-columns.ts (í…Œì´ë¸” ì„¤ì •)
â””â”€â”€ userService.ts / postService.ts (ë°ì´í„°)
```

**ê°œì„ ì **:
- ê´€ì‹¬ì‚¬ì˜ ëª…í™•í•œ ë¶„ë¦¬
- ê° ëª¨ë“ˆì˜ ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜
- ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§
- ì½”ë“œ ê°€ë…ì„± í–¥ìƒ

## ğŸ”„ ë°ì´í„° íë¦„

### ìƒì„± í”Œë¡œìš°

```
1. ì‚¬ìš©ìê°€ í¼ ì…ë ¥
   â†“
2. ManagementPageì—ì„œ onChange í˜¸ì¶œ
   â†“
3. useManagementPageì˜ setUserFormData/setPostFormData í˜¸ì¶œ
   â†“
4. ì‚¬ìš©ìê°€ "ìƒì„±" ë²„íŠ¼ í´ë¦­
   â†“
5. useManagementPageì˜ handleCreate í˜¸ì¶œ
   â†“
6. validation.tsì˜ validateUserForm/validatePostForm í˜¸ì¶œ
   â†“
7. ê²€ì¦ í†µê³¼ ì‹œ userService/postService.create í˜¸ì¶œ
   â†“
8. loadDataë¡œ ë°ì´í„° ì¬ë¡œë“œ
   â†“
9. ì„±ê³µ ì•Œë¦¼ í‘œì‹œ
```

### í†µê³„ ê³„ì‚° í”Œë¡œìš°

```
1. useManagementPageì—ì„œ data ë³€ê²½ ê°ì§€
   â†“
2. getStats() í˜¸ì¶œ
   â†“
3. stats.tsì˜ calculateUserStats/calculatePostStats í˜¸ì¶œ
   â†“
4. ê³„ì‚°ëœ í†µê³„ë¥¼ ManagementPageì— ì „ë‹¬
   â†“
5. ManagementPageì—ì„œ í†µê³„ ì¹´ë“œ ë Œë”ë§
```

## âœ… ê²€ì¦ ë° í…ŒìŠ¤íŠ¸

### ê²€ì¦ ë¡œì§ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

```typescript
// validation.ts í…ŒìŠ¤íŠ¸
describe('validateUserForm', () => {
  it('should return error when username is missing', () => {
    const result = validateUserForm({ email: 'test@example.com' });
    expect(result.isValid).toBe(false);
    expect(result.error).toBe('ì‚¬ìš©ìëª…ê³¼ ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤');
  });
  
  it('should return error when email format is invalid', () => {
    const result = validateUserForm({ 
      username: 'test', 
      email: 'invalid-email' 
    });
    expect(result.isValid).toBe(false);
  });
});
```

### í†µê³„ ê³„ì‚° ë¡œì§ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

```typescript
// stats.ts í…ŒìŠ¤íŠ¸
describe('calculateUserStats', () => {
  it('should calculate active users correctly', () => {
    const users = [
      { id: 1, status: 'active', role: 'user' },
      { id: 2, status: 'active', role: 'admin' },
      { id: 3, status: 'inactive', role: 'user' },
    ];
    const stats = calculateUserStats(users);
    expect(stats.stat1.value).toBe(2); // í™œì„± ì‚¬ìš©ì
    expect(stats.total).toBe(3);
  });
});
```

## ğŸ“Š ì½”ë“œ ë©”íŠ¸ë¦­

### Before
- ManagementPage.tsx: ~740ì¤„
- FormInput.tsx: ~167ì¤„ (ê²€ì¦ ë¡œì§ í¬í•¨)
- ë‹¨ì¼ íŒŒì¼ ë³µì¡ë„: ë†’ìŒ

### After
- ManagementPage.tsx: ~490ì¤„ (ë·°ë§Œ)
- useManagementPage.ts: ~220ì¤„ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
- validation.ts: ~73ì¤„
- stats.ts: ~82ì¤„
- table-columns.ts: ~40ì¤„
- FormInput.tsx: ~104ì¤„ (ìˆœìˆ˜ UI)
- ë‹¨ì¼ íŒŒì¼ ë³µì¡ë„: ë‚®ìŒ

## ğŸ¨ ìŠ¤íƒ€ì¼ë§ ìœ ì§€

**ì¤‘ìš”**: CSS í´ë˜ìŠ¤ëŠ” ê¸°ì¡´ `bg-[var(--color-...)]` í˜•íƒœë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í–ˆìŠµë‹ˆë‹¤.
- ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ CSS í´ë˜ìŠ¤ êµì²´ ì‘ì—…ì€ ì§„í–‰í•˜ì§€ ì•ŠìŒ
- ë””ìì¸ í† í°ì€ CSS ë³€ìˆ˜ë¡œ ê´€ë¦¬

## ğŸ“š ì°¸ê³ ì‚¬í•­

1. **ì˜ì¡´ì„± ê´€ë¦¬**: ê° ëª¨ë“ˆì€ ëª…í™•í•œ ì˜ì¡´ì„±ì„ ê°€ì§€ë©°, ìˆœí™˜ ì°¸ì¡°ê°€ ì—†ë„ë¡ ì„¤ê³„ë¨
2. **íƒ€ì… ì•ˆì •ì„±**: TypeScriptë¥¼ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì •ì„± ë³´ì¥
3. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì—”í‹°í‹° íƒ€ì… ì¶”ê°€ ì‹œ ì‰½ê²Œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
4. **ìœ ì§€ë³´ìˆ˜ì„±**: ê° íŒŒì¼ì˜ ì±…ì„ì´ ëª…í™•í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´

## ğŸ”® í–¥í›„ ê°œì„  ë°©í–¥

1. **ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ **: ì—ëŸ¬ íƒ€ì…ì„ ë” ì„¸ë¶„í™”í•˜ì—¬ ì²˜ë¦¬
2. **ë¡œë”© ìƒíƒœ ê´€ë¦¬**: ë¡œë”© ìƒíƒœë¥¼ ë³„ë„ë¡œ ê´€ë¦¬í•˜ì—¬ UX ê°œì„ 
3. **ìºì‹± ì „ëµ**: ë°ì´í„° ìºì‹±ì„ í†µí•œ ì„±ëŠ¥ ìµœì í™”
4. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±**: ê° ëª¨ë“ˆì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€

---

**ì‘ì„±ì¼**: 2024ë…„
**ì‘ì„±ì**: AI Assistant
**ë²„ì „**: 1.0

